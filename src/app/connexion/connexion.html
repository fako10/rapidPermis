<section class="payment">
  <div class="container">

    <div class="block" *ngIf="!showForgot">
      <h2>Connexion
      </h2>

      <form #f="ngForm" (ngSubmit)="onSubmit()" novalidate>

        <!-- Email -->
        <div class="form-group">
          <label for="email">Adresse email</label>
          <input
            id="email"
            name="email"
            type="email"
            [(ngModel)]="utilisateur.email"
            #email="ngModel"
            required
            email
            placeholder="exemple@mail.com"
            class="form-control">

          <!-- Erreurs email -->
          <div class="error" *ngIf="email.invalid && email.touched">
            <div *ngIf="email.errors?.['required']">L’email est requis</div>
            <div *ngIf="email.errors?.['email']">Format de l’email invalide</div>
          </div>
        </div>

        <!-- Mot de passe -->
        <div class="form-group">
          <label for="password">Mot de passe</label>
          <input
            id="password"
            name="password"
            type="password"
            [(ngModel)]="utilisateur.password"
            #password="ngModel"
            required
            minlength="6"
            placeholder="••••••••"
            class="form-control">

          <!-- Erreurs password -->
          <div class="error" *ngIf="password.invalid && password.touched">
            <div *ngIf="password.errors?.['required']">Le mot de passe est requis</div>
            <div *ngIf="password.errors?.['minlength']">Au moins 6 caractères</div>
          </div>
        </div>



        <!-- Bouton -->
        <button type="submit" [disabled]="f.invalid">
          Se connecter
        </button>
      </form>

      <div class="auth-links">
        <a class="forgot-link" routerLink="/inscription">Créer un compte</a>
        <a class="forgot-link" (click)="toggleForgot()">
          Mot de passe oublié ?
        </a>
      </div>

      <p *ngIf="isLoggedIn" class="success">{{successfullMessage}}</p>
      <p *ngIf="errorMessage" class="error-message">{{errorMessage}}</p>


    </div>





    <div *ngIf="showForgot" class="forgot-box">
      <p>Entrez votre email pour recevoir votre mot de passe :</p>

      <input type="email"
             [(ngModel)]="forgotEmail"
             (ngModelChange)="validateEmail()"
             placeholder="Votre email"
             class="forgot-input">

      <div class="forgot-buttons-row">
        <button (click)="sendForgot()" class="forgot-btn">Envoyer</button>

        <button class="forgot-back-btn"
                (click)="toggleForgot()">
          ⬅ Retour
        </button>
      </div>

      <p *ngIf="forgotMsg" class="forgot-msg">{{ forgotMsg }}</p>
    </div>

  </div>
</section>
